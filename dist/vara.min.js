(function(){'use strict';function a(b){"@babel/helpers - typeof";return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a(b)}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function d(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function g(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?f(Object(b),!0).forEach(function(c){e(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):f(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function h(a){return i(a)||j(a)||k()}function i(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function j(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var l=/*#__PURE__*/function(){function c(a,d,e,f){b(this,c),this.elemntName=a,this.element=document.querySelector(a),this.fontSource=d,this.options=f,this.textItems=e,this.rendered=!1,this.defaultOptions={fontSize:21,strokeWidth:.5,color:"#000",id:!1,duration:1e3,textAlign:"left",x:0,y:0,fromCurrentPosition:{x:!0,y:!0},autoAnimation:!0,queued:!0,delay:0,breakWord:!1,letterSpacing:{global:0}},this.defaultCharacters={63:{paths:[{w:8.643798828125,h:14.231731414794922,my:22.666500004827977,mx:0,pw:28.2464542388916,d:"m 0,0 c -2,-6.01,5,-8.64,8,-3.98,2,4.09,-7,8.57,-7,11.85"},{w:1.103759765625,h:1.549820899963379,my:8.881500004827977,mx:1,pw:4.466640472412109,d:"m 0,0 a 0.7592,0.7357,0,0,1,0,0.735,0.7592,0.7357,0,0,1,-1,-0.735,0.7592,0.7357,0,0,1,1,-0.738,0.7592,0.7357,0,0,1,0,0.738 z"}],w:8.643798828125},space:{paths:[{get d(){return!!this.rendered&&"M0,0 l"+this.fontProperties.space+" 0"},mx:0,my:0,get w(){return!!this.rendered&&this.fontProperties.space},h:0}],get w(){return!!this.rendered&&this.fontProperties.space}}},this.svg=this.createNode("svg",{width:"100%"}),this.element.appendChild(this.svg),this.init()}return d(c,[{key:"init",value:function(){var a=this,b=new XMLHttpRequest;b.open("GET",this.fontSource,!0),b.onreadystatechange=function(){if(4==b.readyState&&200==b.status){var c=JSON.parse(b.responseText);a.fontCharacters=c.c,a.fontProperties=c.p,a.render()}},b.send(null)}},{key:"render",value:function(){this.normalize(),this.getLineCharacteristics(this.textItems[1])}},{key:"normalize",value:function(){var b=this;this.options=this.options||{},Object.keys(this.defaultOptions).forEach(function(a){void 0===b.options[a]&&(b.options[a]=b.defaultOptions[a])}),this.textItems.forEach(function(c,d){"string"==typeof c?b.textItems[d]=g({text:c},b.defaultOptions):"object"===a(c)&&Object.keys(b.options).forEach(function(a){void 0===c[a]&&(b.textItems[a]=b.options[a])})}),Object.keys(this.defaultCharacters).forEach(function(a){void 0===b.fontCharacters[a]&&(b.fontCharacters[a]=b.defaultCharacters[a])})}},{key:"getLineCharacteristics",value:function(a){var b=this;if(this.canvasOriginalWidth=this.svg.getBoundingClientRect().width,!a.breakWord){var c="string"==typeof a.text?[a.text]:a,d=c.map(function(a){return a.split(" ")});d.forEach(function(a){h(a).forEach(function(a){var c=a.charCodeAt(0),d=b.fontCharacters[c]||b.fontCharacters[63]})})}}},{key:"createNode",value:function(a,b){for(var c in a=document.createElementNS("http://www.w3.org/2000/svg",a),b)a.setAttributeNS(null,c.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()}),b[c]);return a}}]),c}();"undefined"==typeof module?window.Vara=l:module.exports=l})();
